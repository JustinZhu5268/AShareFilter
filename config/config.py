"""
配置参数 - PRD V2.0 标准
高精度行业龙头反转策略
"""

# Tushare API 配置
TUSHARE_TOKEN = "82e556132679ef72ee42217682fa809a68c2d32a8d50d0df9b87d0f37384"
TUSHARE_API_URL = "http://lianghua.nanyangqiankun.top"
API_TIMEOUT = 10  # 秒
API_RETRY_TIMES = 3

# ==========================================
# 股票池筛选配置
# ==========================================
MIN_MARKET_CAP = 100  # 总市值 ≥ 100亿 (单位: 亿元)
MIN_LISTED_DAYS = 60  # 上市时间 ≥ 60天

# ==========================================
# 财务指标配置 (TTM)
# ==========================================
MIN_ROE_TTM = 5.0  # ROE(TTM) > 5%
MIN_NET_PROFIT_TTM = 0  # 净利润(TTM) > 0 (单位: 元)
MIN_DEDUCTED_PROFIT_TTM = 0  # 扣非净利润(TTM) > 0 (单位: 元)

# ==========================================
# 行业筛选配置 (RPS)
# ==========================================
RPS_THRESHOLD = 85  # RPS > 85
RPS_DAYS = 20  # RPS计算周期
TOP_N_INDUSTRIES = 5  # 选取前N个强势行业

# ==========================================
# 筹码面配置
# ==========================================
MAX_PROFIT_RATIO = 15.0  # 获利比例 < 15%
MAX_CHIP_CONCENTRATION = 20.0  # 筹码集中度 < 20%

# ==========================================
# 技术面配置
# ==========================================
MA_PERIOD = 60  # 均线周期
MA_BIAS_MIN = -15.0  # 乖离率下限
MA_BIAS_MAX = 5.0  # 乖离率上限

# KDJ配置
KDJ_PERIOD = 9
WEEKLY_KDJ_PERIOD = 9  # 周线KDJ周期
WEEKLY_KDJ_THRESHOLD = 50  # 周线J值阈值 (未超买)

# MACD配置
MACD_FAST = 12
MACD_SLOW = 26
MACD_SIGNAL = 9

# 布林带配置
BB_PERIOD = 20
BB_STD = 2

# ==========================================
# 量价配合配置
# ==========================================
VOLUME_RATIO_MIN = 0.8  # 量比下限
VOLUME_RATIO_MAX = 3.0  # 量比上限
VOLUME_MA_PERIOD = 20  # 成交量均线周期

# ==========================================
# 资金面配置
# ==========================================
NORTHBOUND_DAYS = 5  # 北向资金连续净买入天数

# ==========================================
# 行业趋势配置
# ==========================================
INDUSTRY_MA_PERIOD = 20  # 行业均线周期
INDUSTRY_ABOVE_MA_REQUIRED = True  # 是否要求行业站上均线

# ==========================================
# 支撑位共振配置
# ==========================================
SUPPORT_RESONANCE_REQUIRED = True  # 是否要求支撑位共振
MA60_TOLERANCE = 0.03  # MA60容差范围
BOLLINGER_TOLERANCE = 0.03  # 布林下轨容差范围

# ==========================================
# 风控配置
# ==========================================
STOP_LOSS_PCT = 7.0  # 止损线 -7%
TAKE_PROFIT_PCT = 30.0  # 止盈线 +30%

# ==========================================
# 龙头配置
# ==========================================
TOP_N_STOCKS_PER_IND = 2  # 每行业选取股票数
MIN_INST_HOLDING_RATIO = 5.0  # 机构持股比例 > 5%

# ==========================================
# 缓存配置
# ==========================================
CACHE_EXPIRY = {
    'market_cap': 7,  # 市值7天
    'financial_ttm': 90,  # 财务90天
    'deducted_profit': 90,  # 扣非净利润90天
    'stock_list': 1,  # 股票列表1天
    'adj_factor': 30,  # 复权因子30天
    'industry_rps': 1,  # 行业RPS 1天
    'daily_data': 1,  # 日线数据1天
    'weekly_data': 7,  # 周线数据7天
}

# ==========================================
# 行业代码映射配置 (申万行业)
# ==========================================
INDUSTRY_CODE_MAP = {
    # 电气设备/电力设备
    '电气设备': '801010',
    '电力设备': '801010',
    '新能源汽车': '801010',
    '光伏': '801010',
    '电池': '801010',
    '风电': '801010',
    '核电': '801010',
    '水电': '801010',
    '火电': '801010',
    '电网': '801010',
    '电机': '801010',
    '电气自动化': '801010',
    '电源设备': '801010',
    '储能': '801010',
    '氢能源': '801010',

    # 银行/非银金融
    '银行': '801020',
    '证券': '801020',
    '保险': '801020',
    '多元金融': '801020',
    '信托': '801020',
    '汽车整车': '801020',
    '汽车零部件': '801020',
    '汽车服务': '801020',

    # 医药生物
    '医药生物': '801030',
    '化学制药': '801030',
    '中药': '801030',
    '生物制品': '801030',
    '医疗器械': '801030',
    '医疗服务': '801030',
    '医药商业': '801030',
    '原料药': '801030',

    # 化工/钢铁
    '化工': '801040',
    '钢铁': '801040',
    '化学纤维': '801040',
    '橡胶': '801040',
    '塑料': '801040',
    '有色金属': '801040',
    '稀土': '801040',
    '小金属': '801040',
    '贵金属': '801040',

    # 电子/计算机
    '电子': '801050',
    '半导体': '801050',
    '元件': '801050',
    '光学光电子': '801050',
    '消费电子': '801050',
    '计算机': '801060',
    '软件开发': '801060',
    'IT设备': '801060',
    '互联网': '801060',
    '通信': '801070',
    '通信设备': '801070',
    '通信服务': '801070',
    '5G': '801070',
    '物联网': '801070',

    # 机械设备
    '机械设备': '801080',
    '工程机械': '801080',
    '通用设备': '801080',
    '专用设备': '801080',
    '自动化设备': '801080',
    '机器人': '801080',
    '航空航天': '801080',
    '轨交设备': '801080',

    # 建筑装饰/房地产
    '建筑装饰': '801090',
    '房屋建设': '801090',
    '装修装饰': '801090',
    '园林工程': '801090',
    '基础建设': '801090',
    '房地产': '801110',

    # 家电/食品饮料
    '家电': '801110',
    '家用电器': '801110',
    '白色家电': '801110',
    '黑色家电': '801110',
    '小家电': '801110',
    '厨卫电器': '801110',
    '食品饮料': '801120',
    '白酒': '801120',
    '啤酒': '801120',
    '其他饮料': '801120',
    '食品加工': '801120',
    '调味发酵品': '801120',
    '乳品': '801120',
    '肉制品': '801120',

    # 纺织服装/轻工制造
    '纺织服装': '801150',
    '服装': '801150',
    '纺织制造': '801150',
    '印染': '801150',
    '皮革皮具': '801150',
    '饰品': '801150',
    '轻工制造': '801210',
    '造纸': '801210',
    '包装印刷': '801210',
    '家具': '801210',
    '文具': '801210',

    # 交通运输/仓储物流
    '交通运输': '801180',
    '物流': '801180',
    '机场': '801180',
    '港口': '801180',
    '公路铁路': '801180',
    '航运': '801180',
    '航空': '801180',
    '铁路公路': '801180',

    # 农林牧渔
    '农林牧渔': '801140',
    '种植业': '801140',
    '渔业': '801140',
    '林业': '801140',
    '饲料': '801140',
    '畜禽养殖': '801140',
    '动物保健': '801140',
    '农业综合': '801140',

    # 公用事业/环保
    '公用事业': '801160',
    '电力': '801160',
    '燃气': '801160',
    '水务': '801160',
    '环保': '801160',
    '节能服务': '801160',

    # 传媒/商贸零售
    '传媒': '801230',
    '游戏': '801230',
    '影视院线': '801230',
    '出版': '801230',
    '广告营销': '801230',
    '商贸零售': '801240',
    '百货': '801240',
    '超市': '801240',
    '专业连锁': '801240',
    '电商': '801240',

    # 休闲服务/国防军工
    '休闲服务': '801210',
    '旅游': '801210',
    '酒店餐饮': '801210',
    '国防军工': '801280',
    '航空装备': '801280',
    '航天装备': '801280',
    '地面兵装': '801280',
    '船舶制造': '801280',
}

# 默认行业代码（未找到映射时使用）
DEFAULT_INDUSTRY_CODE = '801010'
USE_MOCK_DATA = False  # 是否使用Mock数据 (调试用)
MOCK_MODE_STOCK = None  # 指定单只股票代码 (如 '300274')

# 测试用的单只股票
TEST_STOCK_CODE = '300274'  # 阳光电源
TEST_STOCK_NAME = '阳光电源'

# ==========================================
# 监控配置
# ==========================================
MONITORING_ENABLED = True  # 是否启用监控
METRICS_ENABLED = True  # 是否收集指标
ALERTS_ENABLED = True  # 是否启用告警

# 性能阈值配置
API_RESPONSE_TIME_THRESHOLD = 1.0  # API响应时间阈值(秒)
CACHE_HIT_RATE_THRESHOLD = 50.0  # 缓存命中率阈值(%)
FILTER_PERFORMANCE_THRESHOLD = 10.0  # 筛选性能阈值(秒)
MEMORY_USAGE_THRESHOLD = 500.0  # 内存使用阈值(MB)

# 告警级别配置 (info/warning/error/critical)
ALERT_LEVEL_API = "warning"
ALERT_LEVEL_CACHE = "warning"
ALERT_LEVEL_FILTER = "warning"
ALERT_LEVEL_MEMORY = "warning"

# 告警输出配置
ALERT_LOG_TO_CONSOLE = True  # 输出到控制台
ALERT_LOG_TO_FILE = False  # 输出到文件
ALERT_LOG_FILE = "logs/alerts.log"  # 告警日志文件路径